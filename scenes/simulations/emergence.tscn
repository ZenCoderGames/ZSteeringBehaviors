[gd_scene load_steps=12 format=3 uid="uid://doafyn24hm0hb"]

[ext_resource type="Script" uid="uid://cgra4mbvmwdvi" path="res://scripts/ZAI_Manager.gd" id="1_wavwj"]
[ext_resource type="Texture2D" uid="uid://m4k6kkhgrl4p" path="res://art/runtime/Character.png" id="2_uovo5"]
[ext_resource type="Script" uid="uid://chbaktxhg8vp3" path="res://scripts/ZAI_Character.gd" id="3_ligdk"]
[ext_resource type="Script" uid="uid://dlmhsuayspqhw" path="res://scripts/behaviors/ZAI_Behavior_Seek.gd" id="4_4geth"]
[ext_resource type="Script" uid="uid://cv4u41t3srk8v" path="res://scripts/behaviors/ZAI_Behavior_Flocking.gd" id="5_kma6p"]
[ext_resource type="Script" uid="uid://ehn7jh438wrv" path="res://scripts/behaviors/ZAI_Behavior_ObstacleAvoidance.gd" id="7_ligdk"]
[ext_resource type="Script" uid="uid://bcujqh5f1pofk" path="res://scripts/behaviors/ZAI_Behavior_WallAvoidance.gd" id="7_uovo5"]
[ext_resource type="Script" uid="uid://cgcjhkc4o8m0k" path="res://scripts/simulation/ZAI_FlockSpawner.gd" id="8_g6xo2"]
[ext_resource type="PackedScene" uid="uid://c1i6lxbnck8dn" path="res://entities/flock_combinedBehavior.tscn" id="9_qywxo"]
[ext_resource type="Script" uid="uid://l024pr03sevx" path="res://scripts/ZAI_Obstacle.gd" id="10_uovo5"]
[ext_resource type="Script" uid="uid://cnx8lyy4egsp2" path="res://scripts/ZAI_Wall.gd" id="11_ligdk"]

[node name="AIScene" type="Node2D"]
script = ExtResource("1_wavwj")

[node name="Flock_Leader" type="Sprite2D" parent="." node_paths=PackedStringArray("behaviorList")]
self_modulate = Color(0.3313745, 0.7719792, 0.38805267, 1)
position = Vector2(469, 364)
texture = ExtResource("2_uovo5")
script = ExtResource("3_ligdk")
max_force = 50.0
useSmoothRotation = true
behaviorList = [NodePath("AI_Flocking"), NodePath("AIWallAvoidance"), NodePath("AISeek"), NodePath("AIObstacleAvoidance")]

[node name="AISeek" type="Node2D" parent="Flock_Leader" node_paths=PackedStringArray("target_char")]
script = ExtResource("4_4geth")
offsetRecalcThreshold = 5.0
debug_arrival = true
priority = 2.0
target_char = NodePath("../../Seeker")

[node name="AI_Flocking" type="Node2D" parent="Flock_Leader"]
script = ExtResource("5_kma6p")
disable = true

[node name="AIObstacleAvoidance" type="Node2D" parent="Flock_Leader"]
position = Vector2(2, -1)
script = ExtResource("7_ligdk")
feelerLength = 100.0
feelerWidth = 15.0
weight = 2.0
priority = 5.0

[node name="AIWallAvoidance" type="Node2D" parent="Flock_Leader"]
script = ExtResource("7_uovo5")
feelerLength = 75.0
feelerWidth = 15.0
priority = 10.0
debugColor = Color(1, 0.23921569, 0.23921569, 1)

[node name="Seeker" type="Sprite2D" parent="." node_paths=PackedStringArray("behaviorList")]
self_modulate = Color(0.29444468, 0.7441041, 0.721786, 1)
position = Vector2(595, 178)
texture = ExtResource("2_uovo5")
script = ExtResource("3_ligdk")
max_speed = 300.0
useSmoothRotation = true
behaviorList = [NodePath("AISeek"), NodePath("AIWallAvoidance"), NodePath("AIObstacleAvoidance")]

[node name="AISeek" type="Node2D" parent="Seeker"]
script = ExtResource("4_4geth")
set_target_as_mouse_pos = true
offsetRecalcThreshold = 5.0
debug_arrival = true
priority = 2.0

[node name="AIObstacleAvoidance" type="Node2D" parent="Seeker"]
position = Vector2(2, -1)
script = ExtResource("7_ligdk")
feelerLength = 100.0
feelerWidth = 15.0
weight = 2.0
priority = 5.0

[node name="AIWallAvoidance" type="Node2D" parent="Seeker"]
script = ExtResource("7_uovo5")
feelerLength = 75.0
feelerWidth = 15.0
priority = 10.0
debugColor = Color(1, 0.23921569, 0.23921569, 1)

[node name="FlockSpawner" type="Node2D" parent="."]
position = Vector2(237, 329)
script = ExtResource("8_g6xo2")
flockPrefab = ExtResource("9_qywxo")
totalUnitCount = 10

[node name="Obstacles" type="Node2D" parent="."]

[node name="Obstacle_09" type="Sprite2D" parent="Obstacles"]
position = Vector2(369, 486)
script = ExtResource("10_uovo5")
radius = 100.0

[node name="Obstacle_12" type="Sprite2D" parent="Obstacles"]
position = Vector2(130, 535)
script = ExtResource("10_uovo5")
radius = 35.0

[node name="Wall_01" type="Node2D" parent="."]
position = Vector2(516, 282)
script = ExtResource("11_ligdk")
points = PackedVector2Array(-460, -249, 12.095337, -241.72047, 493, -255, 582, -158, 582, 291)
point_in_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])
point_out_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])

[node name="Wall_02" type="Node2D" parent="."]
position = Vector2(504, 560)
script = ExtResource("11_ligdk")
points = PackedVector2Array(-383, 52, 502, 55, 595, 17)
point_in_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])
point_out_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])

[node name="Wall_03" type="Node2D" parent="."]
position = Vector2(518, 284)
script = ExtResource("11_ligdk")
points = PackedVector2Array(-467, -257, -475, 288, -400, 331)
point_in_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])
point_out_controls = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])

[node name="AIObstacleAvoidance" type="Node2D" parent="."]
position = Vector2(2, -1)
script = ExtResource("7_ligdk")
feelerLength = 100.0
feelerWidth = 15.0
weight = 2.0
priority = 5.0
